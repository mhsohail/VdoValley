@{
    string url = "http://www.yahoo.com/";
    string str = ViewBag.Video;
    List<VdoValley.Models.Video> TopRatedVideos = new List<VdoValley.Models.Video>();
    VdoValley.Models.VdoValleyContext db = new VdoValley.Models.VdoValleyContext();
    List<VdoValley.Models.Video> vdos = db.Videos.ToList();
    var ratings = db.Ratings.GroupBy(r => r.VideoId).Select(obj => new
    {
        VideoId = obj.Key,
        AvgScore = obj.Average(i => i.Score)
    }).OrderByDescending(obj => obj.AvgScore);

    foreach (var rating in ratings)
    {
        VdoValley.Models.Video vdo = db.Videos.Where(v => v.VideoId.Equals(rating.VideoId)).ToList()[0];
        TopRatedVideos.Add(vdo);
    }
}

@section Slider {
<!---->
<div class="gallery">
    <h1>Top Rated Videos</h1>
    <!-- requried-jsfiles-for owl -->
    <link href="~/Content/magblog-web/owl.carousel.css" rel="stylesheet">
    <script src="~/Scripts/magblog-webb/owl.carousel.js"></script>
    <script>
        $(document).ready(function () {
            $("#owl-demo").owlCarousel({
                items: 3,
                lazyLoad: true,
                autoPlay: true,
                pagination: false,
                navigation: true,
                navigationText: true,
            });
        });
    </script>
    <!-- //requried-jsfiles-for owl -->
    <!-- start content_slider -->
    <div id="owl-demo" class="owl-carousel ">
        @foreach (var video in TopRatedVideos)
        {
            <div class="item g1">
                <a href="/Videos/Details/@video.VideoId"><img class="lazyOwl " data-src="@video.getDailyMotionThumb(video.getDailyMotionVideoCode(video.Url), VdoValley.Models.DailymotionThumbnailSize.thumbnail_large_url)" alt="@video.Title" style="min-height:50px; height:211px;" /></a>
                <div class="caption">
                    <h3 class="cinema">
                            @{
            int maxTitleLength = 25;
            string title = string.Empty;
            if (video.Title.Length > maxTitleLength) { title = video.Title.Substring(0, maxTitleLength - 1) + "..."; } else { title = video.Title; }
                            }
                        <a href="/Videos/Details/@video.VideoId">@Html.Raw(title)</a>
                    </h3>
                </div>
            </div>
        }
    </div>
    <!--//sreen-gallery-cursual---->
</div>
}
<!---->
@{
    List<VdoValley.Models.Video> AllVideos = db.Videos.ToList();
}
    @section ContentArea {
    <div class="col-md-8 content-top">
        <div class="number">
            <div class="span_8" style="margin-bottom:5px;">
                <div class="row_8">
                    <div class="sap_tabs">
                        <div id="horizontalTab" style="display: block; width: 100%; margin: 0px;">
                            <!-- Portfolio Item Row -->
                            <div class="row">
                                <div class="col-md-8">
                                    <img class="img-responsive" src="http://placehold.it/750x500" alt="">
                                </div>
                                <div class="col-md-4">
                                    <h3>Project Description</h3>
                                    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam viverra euismod odio, gravida pellentesque urna varius vitae. Sed dui lorem, adipiscing in adipiscing et, interdum nec metus. Mauris ultricies, justo eu convallis placerat, felis enim.</p>
                                </div>
                            </div>
                            <!-- /.row -->
                        </div>
                    </div>
                </div>
            </div>
            <div class="span_8">
                <div class="row_8">
                    <div class="sap_tabs">
                        <div id="horizontalTab" style="display: block; width: 100%; margin: 0px;">
                            <div class="resp-tabs-container">
                                <h2 class="resp-accordion " role="tab" aria-controls="tab_item-0"><span class="resp-arrow"></span></h2>
                                <div class="tab-1 resp-tab-content " aria-labelledby="tab_item-0">
                                    <div class="facts">
                                        <img src="images/pc.jpg" class="img-responsive" alt="">
                                    </div>
                                </div>
                                <h2 class="resp-accordion resp-tab-active" role="tab" aria-controls="tab_item-1"><span class="resp-arrow"></span></h2>
                                <div class="tab-1 resp-tab-content resp-tab-content-active" aria-labelledby="tab_item-1">
                                    <div class="facts">
                                        <img src="images/pc1.jpg" class="img-responsive" alt="">
                                    </div>
                                </div>
                                <h2 class="resp-accordion" role="tab" aria-controls="tab_item-2"><span class="resp-arrow"></span></h2>
                                <div class="tab-1 resp-tab-content" aria-labelledby="tab_item-2">
                                    <div class="facts">
                                        <img src="images/pc2.jpg" class="img-responsive" alt="">
                                    </div>
                                </div>
                                <h2 class="resp-accordion" role="tab" aria-controls="tab_item-3"><span class="resp-arrow"></span></h2>
                                <div class="tab-1 resp-tab-content" aria-labelledby="tab_item-3">
                                    <div class="facts">
                                        <img src="images/pc3.jpg" class="img-responsive" alt="">

                                    </div>
                                </div>
                            </div>
                            
                            <ul class="row">
                                <!--<ul class="resp-tabs-list">-->
                                @{
                                    foreach (var video in AllVideos)
                                    {
                                        <!--<li class="resp-tab-item active" aria-controls="tab_item- col-lg-12" role="tab"><span><a href="/Videos/Details/video.VideoId"><img src="video.thumbnail_large_url" class="img-responsive" alt="video.Title" style="min-height:50px; height:115px; width:171px;min-width:100px;" /></a></span></li>
                                        <li class="col-xs-12 col-sm-6 col-md-12 col-lg-3" style="overflow:hidden;"><a href="/Videos/Details/video.VideoId"><img src="video.thumbnail_large_url" class="img-responsive" alt="video.Title" style="width:100%;height:100%;margin-bottom:5px;margin-top:5px;" /></a></li>-->
                                        //min-width:150px;width:200px;max-width:200px;min-height:100px;height:100px;
                                        <div class="thumbnail-container col-lg-3 col-md-4 col-xs-6 thumb">
                                            <a class="thumbnail" href="/Videos/Details/@video.VideoId">
                                                <img class="img-responsive" src="@video.getDailyMotionThumb(video.getDailyMotionVideoCode(video.Url), VdoValley.Models.DailymotionThumbnailSize.thumbnail_large_url)" alt="">
                                                <div class="details">
                                                    <div class="panel-heading">
                                                            @{
                                                                int maxTitleLength = 40;
                                                                string title = string.Empty;
                                                                if (video.Title.Length > maxTitleLength) { title = video.Title.Substring(0, maxTitleLength - 1) + "..."; } else { title = video.Title; }
                                                            }
                                                        <h3 class="panel-title col-lg-offset-1">@title</h3>
                                                    </div>
                                                </div>
                                            </a>
                                        </div>
                                    }
                                }
                                <div class="clearfix"> </div>
                            </ul>
</div>
                    </div>
                </div>
            </div>
            <!---->
        </div>
        <!---->
    </div>
    }
    <!---->    
    </div>

<p class="footer-class">Copyright © 2015 Megblog Template by  <a href="http://w3layouts.com/" target="_blank">W3layouts</a> </p>
<script type="text/javascript">
    $(document).ready(function () {
        /*
        var defaults = {
            containerID: 'toTop', // fading element id
            containerHoverID: 'toTopHover', // fading element hover id
            scrollSpeed: 1200,
            easingType: 'linear'
        };
        */

        $().UItoTop({ easingType: 'easeOutQuart' });

    });
</script>
<a href="#" id="toTop" style="display: block;"> <span id="toTopHover" style="opacity: 1;"> </span></a>
